function conversion(t){let e=Math.floor(t/60);e=1===e.toString().length?"0"+e:e;let o=Math.round(t%60);return o=1===o.toString().length?"0"+o:o,`${e}:${o}`}const audio=document.querySelector(".song audio"),allTracks=document.querySelectorAll(".track"),tracklistLength=allTracks.length,buttonPlay=document.querySelectorAll(".play-pause"),buttonNext=document.querySelectorAll(".next"),buttonPrev=document.querySelectorAll(".prev"),buttonPlayIcon=document.querySelectorAll(".play-pause i"),playButtonHandler=t=>{t.preventDefault(),audio.paused?(audio.play(),buttonPlayIcon.forEach(t=>t.classList.remove("fa-play")),buttonPlayIcon.forEach(t=>t.classList.add("fa-pause"))):(audio.pause(),buttonPlayIcon.forEach(t=>t.classList.add("fa-play")),buttonPlayIcon.forEach(t=>t.classList.remove("fa-pause")))},tracklistHandler=t=>{t.preventDefault();const e=parseInt(t.currentTarget.getAttribute("songId"));playThis(e),allTracks.forEach(t=>t.classList.remove("active")),t.currentTarget.classList.add("active")},nextHandler=t=>{const e=parseInt(document.querySelector(".song").getAttribute("song-id")),o=e+1;playThis(o>tracklistLength?1:o)},prevHandler=t=>{const e=parseInt(document.querySelector(".song").getAttribute("song-id")),o=e-1;playThis(0===o?tracklistLength:o)},playThis=t=>{const e=document.querySelector(".song");let o=document.querySelector(".name"),r=document.querySelector(".artist"),a=document.querySelector(".cover"),n=document.querySelector(".cover-shadow"),c=document.querySelector("audio source");document.querySelector(".song-cover");const l=document.querySelector(`[songId="${t}"]`),s=l.getAttribute("songId"),u=l.getAttribute("songName"),i=l.getAttribute("songArtist"),d=l.getAttribute("songPath"),y=l.getAttribute("songCover");e.setAttribute("song-id",s),o.innerHTML=u,r.innerHTML=i,a.src=y,n.src=y,c.src=d,audio.load(),audio.play(),buttonPlayIcon.forEach(t=>t.classList.remove("fa-play")),buttonPlayIcon.forEach(t=>t.classList.add("fa-pause")),allTracks.forEach(t=>t.classList.remove("active")),allTracks.forEach(t=>{t.getAttribute("songId")===s&&t.classList.add("active")})};buttonPlay.forEach(t=>t.addEventListener("click",playButtonHandler)),buttonNext.forEach(t=>t.addEventListener("click",nextHandler)),buttonPrev.forEach(t=>t.addEventListener("click",prevHandler)),allTracks.forEach(t=>t.addEventListener("click",tracklistHandler));const theAudio=document.querySelector("audio"),start=document.querySelectorAll(".start"),end=document.querySelectorAll(".end"),progressBar=document.querySelectorAll(".progress-bar"),now=document.querySelectorAll(".now");theAudio.onloadedmetadata=function(){end.forEach(t=>t.innerHTML=conversion(audio.duration)),start.forEach(t=>t.innerHTML=conversion(audio.currentTime))},progressBar.forEach(t=>t.addEventListener("click",function(t){let e=this.getBoundingClientRect().left,o=t.pageX,r=(o-e)/this.offsetWidth;now.forEach(t=>t.style.width=100*r.toFixed(3)+"%"),audio.currentTime=r*audio.duration,audio.play()})),setInterval(()=>{start.forEach(t=>t.innerHTML=conversion(audio.currentTime)),now.forEach(t=>t.style.width=audio.currentTime/audio.duration.toFixed(3)*100+"%")},1e3);